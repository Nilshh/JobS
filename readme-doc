# Job Aggregator - Docker Compose WebApp

Eine moderne **WebApp zur automatischen Jobsuche Ã¼ber mehrere JobbÃ¶rsen** mit tÃ¤glichen automatisierten AblÃ¤ufen, konfigurierbarem Zeitplan und benutzerfreundlicher OberflÃ¤che.

## ðŸŽ¯ Features

âœ… **Automatische tÃ¤gliche Jobsuche** - Konfiguriere Uhrzeit, Titel, Ort und Radius
âœ… **Multi-Source Job Aggregation** - Arbeitnow API, erweiterbar auf Indeed, LinkedIn, StepStone
âœ… **Persistente Datenspeicherung** - PostgreSQL Datenbank fÃ¼r Job-Historie
âœ… **Intelligente Duplikatvermeidung** - Gleiche Jobs werden nicht doppelt gespeichert
âœ… **Responsive Web UI** - React Frontend mit modernem Design
âœ… **REST API** - VollstÃ¤ndige FastAPI Backend mit Swagger Dokumentation
âœ… **Docker Compose** - One-Command Deployment mit allen Services
âœ… **Hintergrund-Scheduler** - APScheduler fÃ¼r zuverlÃ¤ssige zeitgesteuerte AusfÃ¼hrung
âœ… **Benutzerfreundliche Konfiguration** - Einfach Suchparameter anpassen

## ðŸ—ï¸ Architektur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Compose                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Frontend   â”‚   â”‚   Backend    â”‚   â”‚  PostgreSQL  â”‚    â”‚
â”‚  â”‚   (React)    â”‚   â”‚ (FastAPI)    â”‚   â”‚   (DB)       â”‚    â”‚
â”‚  â”‚   :3000      â”‚   â”‚  :8000       â”‚   â”‚   :5432      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  APScheduler (Automatic Daily Job Searches)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Job APIs (Arbeitnow, Indeed, LinkedIn, etc.)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“‹ Voraussetzungen

- **Docker** >= 20.10
- **Docker Compose** >= 2.0
- Freier Port: 3000 (Frontend), 8000 (Backend), 5432 (Database)

## ðŸš€ Schnellstart

### 1. Repository Setup

```bash
# Clone/Download die Dateien
mkdir job-aggregator
cd job-aggregator

# Verzeichnisstruktur erstellen
mkdir -p backend frontend

# Dateien in entsprechende Verzeichnisse kopieren
# docker-compose.yml -> ./
# backend-main.py -> ./backend/main.py
# backend-dockerfile -> ./backend/Dockerfile
# etc.
```

### 2. Environment Variablen Konfigurieren

```bash
# .env Datei erstellen
cat > .env << EOF
DB_USER=jobuser
DB_PASSWORD=secure_password_123
DB_NAME=job_aggregator
DEBUG=False
LOG_LEVEL=INFO
REACT_APP_API_URL=http://localhost:8000
EOF
```

### 3. Docker Compose Starten

```bash
# Alle Services starten
docker-compose up -d

# Logs Ã¼berwachen
docker-compose logs -f

# Status prÃ¼fen
docker-compose ps
```

### 4. Anwendung Ã–ffnen

- **Frontend**: http://localhost:3000
- **API Dokumentation**: http://localhost:8000/docs
- **Redoc**: http://localhost:8000/redoc

## ðŸ“– Benutzung

### Neue Jobsuche Erstellen

1. Ã–ffne http://localhost:3000
2. Klicke **"Neue Suche erstellen"**
3. Gib ein:
   - **Job Titel**: z.B. "Python Developer", "DevOps Engineer"
   - **Ort**: z.B. "Berlin", "Hamburg", "Remote"
   - **Umkreis**: 25 km (optional)
   - **Uhrzeit**: z.B. "09:00" (tÃ¤gliche AusfÃ¼hrungszeit)
4. Klicke **"Speichern"**

### Jobs Anschauen

- **Alle Jobs**: "Jobs" Tab zeigt alle gefundenen Jobs
- **Nach Suche filtern**: WÃ¤hle eine Suche zur Filterung
- **Details anschauen**: Klick auf Job-Titel fÃ¼r vollstÃ¤ndige Beschreibung
- **Zur Stelle bewerben**: Externer Link zur Original-JobbÃ¶rse

### Suche Bearbeiten

1. WÃ¤hle Suche aus der Liste
2. Klicke **"Bearbeiten"**
3. Ã„ndere Parameter (Zeit, Titel, Ort, etc.)
4. Klicke **"Aktualisieren"**
5. Suche wird zur neuen Uhrzeit ausgefÃ¼hrt

### Manuelle Suche Triggern

- WÃ¤hle Suche und klicke **"Jetzt Suchen"**
- Backend sucht sofort nach neuen Jobs
- Ergebnisse erscheinen in Echtzeit

## ðŸ”Œ API Endpoints

### Suchverwaltung

```bash
# Neue Suche erstellen
POST /api/searches
{
  "title": "Python Developer",
  "location": "Berlin",
  "radius": 25,
  "schedule_time": "09:00"
}

# Alle Suchen auflisten
GET /api/searches

# Spezifische Suche abrufen
GET /api/searches/{search_id}

# Suche aktualisieren
PUT /api/searches/{search_id}

# Suche lÃ¶schen
DELETE /api/searches/{search_id}
```

### Job-Verwaltung

```bash
# Alle Jobs der letzten 7 Tage abrufen
GET /api/jobs?days=7

# Jobs fÃ¼r spezifische Suche abrufen
GET /api/jobs/search/{search_id}

# Manuelle Suche triggern
POST /api/jobs/trigger-search/{search_id}
```

## ðŸ—„ï¸ Datenbank-Schema

### job_searches Tabelle
```sql
- id (Primary Key)
- title (VARCHAR)
- location (VARCHAR)
- radius (INTEGER)
- schedule_time (VARCHAR) - Format: "HH:MM"
- is_active (BOOLEAN)
- last_search (DATETIME)
- created_at, updated_at
```

### jobs Tabelle
```sql
- id (Primary Key)
- title, company, location (VARCHAR)
- description (TEXT)
- url (VARCHAR, UNIQUE)
- source (VARCHAR) - "arbeitnow", "indeed", etc.
- salary, job_type (VARCHAR, nullable)
- posted_date, found_at (DATETIME)
- search_id (Foreign Key)
```

## ðŸ”§ Konfiguration

### Backend Environment Variablen

```env
DATABASE_URL=postgresql://user:pass@db:5432/job_aggregator
DEBUG=False
LOG_LEVEL=INFO
```

### Frontend Environment Variablen

```env
REACT_APP_API_URL=http://localhost:8000
```

### Docker Compose Ports

- Frontend: 3000 â†’ 3000
- Backend: 8000 â†’ 8000
- PostgreSQL: 5432 â†’ 5432

Passe diese in `docker-compose.yml` an, wenn Konflikte vorhanden sind.

## ðŸ“Š Job-Quellen

### Aktuell UnterstÃ¼tzt
- **Arbeitnow** - Free API, keine Auth erforderlich
  - Deutsche und europÃ¤ische Jobs
  - Aktualisierung tÃ¤glich

### Geplant/Erweiterbar
- **Indeed** - Publisher API (kostenpflichtig, API Key erforderlich)
- **LinkedIn** - Mit LinkedIn Credentials
- **StepStone** - Mit API Key
- **Monster** - Public API
- **Xing** - Mit Auth

## â° Scheduler Funktionsweise

Der APScheduler im Backend:

1. **Startup**: Liest alle aktiven Suchkonfigurationen
2. **Scheduling**: Erstellt tÃ¤glich sich wiederholende Jobs fÃ¼r konfigurierte Zeiten
3. **Execution**: FÃ¼hrt Suche zur angegebenen Uhrzeit aus
4. **Storage**: Speichert neue Jobs in der Datenbank
5. **Deduplication**: Vermeidet doppelte EintrÃ¤ge via URL-Check

### Zeitzone

StandardmÃ¤ÃŸig UTC. Anpassung in `backend/main.py`:

```python
# Timezone fÃ¼r Scheduler Ã¤ndern
TZ = pytz.timezone('Europe/Berlin')  # oder 'Europe/Zurich', 'Europe/Amsterdam'
```

## ðŸ”’ Sicherheit

- **CORS aktiviert** - Frontend/Backend Kommunikation
- **Umgebungsvariablen** fÃ¼r sensible Daten (.env Datei)
- **PostgreSQL** mit Passwort geschÃ¼tzt
- **Health Checks** fÃ¼r Container
- **Logging** fÃ¼r Debugging und Audit-Trail

### Produktions-Deployment Tipps

1. Ã„ndere DB_PASSWORD in .env!
2. Setze DEBUG=False
3. Verwende reverse proxy (Nginx)
4. Aktiviere HTTPS/TLS
5. Setze sichere CORS Origins
6. Backup Strategy fÃ¼r PostgreSQL Daten

## ðŸ“ Logging & Debugging

### Logs Anschauen

```bash
# Alle Services
docker-compose logs -f

# Spezifischer Service
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f db
```

### Backend Debugging

```bash
# Im Container in die Shell
docker-compose exec backend bash

# Python REPL Ã¶ffnen
docker-compose exec backend python
```

### Database Query

```bash
# In PostgreSQL mit psql
docker-compose exec db psql -U jobuser -d job_aggregator

# Beispiel Queries:
SELECT * FROM job_searches;
SELECT COUNT(*) FROM jobs;
SELECT * FROM jobs WHERE source='arbeitnow' ORDER BY found_at DESC;
```

## ðŸ› Troubleshooting

### "Cannot connect to backend"
```bash
# Container Status prÃ¼fen
docker-compose ps

# Backend Logs anschauen
docker-compose logs backend

# Port-Konflikt prÃ¼fen
netstat -an | grep 8000
```

### "Database connection error"
```bash
# DB Health Check
docker-compose exec db pg_isready -U jobuser

# DB Logs
docker-compose logs db
```

### "Jobs werden nicht gefunden"
1. PrÃ¼fe Schedule-Zeit im Frontend
2. Manuelle Suche triggern: `POST /api/jobs/trigger-search/1`
3. Backend Logs prÃ¼fen: `docker-compose logs backend`
4. API Response prÃ¼fen: curl http://localhost:8000/health

### "Jobs werden doppelt angezeigt"
- Normales Verhalten bei unterschiedlichen JobbÃ¶rsen
- Deduplizierung arbeitet Ã¼ber URLs
- Kann in Frontend UI gelÃ¶st werden (Duplicate Filter)

## ðŸ“¦ Deployment auf Produktionsserver

### Mit Nginx Reverse Proxy

```nginx
server {
    listen 80;
    server_name jobs.example.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
    }

    location /api/ {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### Mit Docker Stack (Swarm)

```bash
docker stack deploy -c docker-compose.yml job-aggregator
```

### Mit Kubernetes (Helm Chart mÃ¶glich)

```bash
helm install job-aggregator ./helm-chart
```

## ðŸ“ž Support & Beitrag

Bei Fragen oder Bugs:
1. PrÃ¼fe Backend Logs
2. PrÃ¼fe API Response in Swagger UI
3. PrÃ¼fe Browser Console (Frontend Errors)
4. PrÃ¼fe Docker Container Status

## ðŸ“„ Lizenz

MIT License - Frei verwendbar

---

**Viel Erfolg bei deiner Job-Suche! ðŸŽ¯**